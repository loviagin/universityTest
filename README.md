Основная функциональность включает регистрацию и авторизацию пользователей с использованием сессий и cookies, персонализацию интерфейса посредством смены темы, кэширование данных с файловой системой и защиту от основных уязвимостей.

## Функциональные возможности

- **Регистрация и авторизация**  
  - Роут **POST /register** для регистрации (логин + пароль).  
  - Роут **POST /login** для входа пользователя (создание сессии).  
  - Хэширование паролей с использованием `bcrypt`.
  
- **Защищённые маршруты**  
  - Роут **GET /profile** для личного кабинета, доступный только авторизованным пользователям.
  
- **Выход из системы**  
  - Роут **POST /logout** для завершения сеанса (удаление сессии).
  
- **Кэширование данных**  
  - Роут **GET /data** возвращает данные, кэшированные в файле (срок действия кэша — 1 минута). Если кэш устарел, генерируются новые данные.

- **Персонализация интерфейса**  
  - Переключение темы (светлая/тёмная) с сохранением выбора в `localStorage`.

- **Защита от основных уязвимостей**  
  - Использование сессионных cookies с флагами `httpOnly` и `sameSite=lax` для минимизации угроз (например, CSRF и XSS).  
  - Редирект неавторизованных пользователей на страницу входа.

## Структура проекта

universitytest/
├── package.json         # Конфигурация проекта и зависимости
├── server.js            # Основной файл сервера с настройками роутов, сессий, кэширования
├── index.html           # Страница входа/регистрации
├── profile.html         # Личный кабинет (профиль), где доступны кнопки для получения данных и выхода
└── dataCache.json       # Файл для хранения кэша (создаётся автоматически)

## Установка и запуск

### Требования

- Node.js
- npm

### Шаги установки

1. **Клонируйте репозиторий:**

   ```bash
   git clone https://github.com/loviagin/universityTest.git
   cd universityTest
   ```
	2.	Установите зависимости:

```
npm install
```

	3.	Запустите сервер:
```
node server.js
```

	4.	Откройте приложение в браузере:
Перейдите по адресу: http://localhost:3000/

Использование
	•	Регистрация/Вход:
На главной странице (index.html) расположены формы для регистрации и входа. При успешном входе происходит перенаправление на страницу личного кабинета (profile.html).
	•	Личный кабинет (Profile):
На странице профиля доступны следующие элементы:
	•	Кнопка Получить данные – отправляет GET-запрос на маршрут /data для получения актуальных данных.
	•	Кнопка Выход – отправляет POST-запрос на маршрут /logout для завершения сессии и перенаправления на страницу входа.
	•	Кнопка Переключить тему – меняет тему интерфейса (светлая/тёмная) с сохранением выбранного режима в localStorage.

Роуты API
	•	POST /register: Регистрация нового пользователя (принимает username и password в JSON).
	•	POST /login: Авторизация пользователя, создание сессии.
	•	GET /profile: Доступ к личному кабинету (только для авторизованных).
	•	POST /logout: Завершение сессии, удаление сессии.
	•	GET /data: Получение данных, кэширование в файле на 1 минуту.

Технические особенности
	•	Сессии:
Конфигурация сессий осуществляется с помощью express-session. Cookies настроены с флагами httpOnly и sameSite=lax для безопасности.
	•	Кэширование:
Для реализации кэширования используется файловая система (fs). Данные сохраняются в файле dataCache.json, и если время последней модификации файла не превышает 1 минуту, данные отдаются из кэша.
	•	Безопасность:
	•	Пароли хэшируются с использованием библиотеки bcrypt.
	•	Middleware проверяет наличие сессии для доступа к защищённым маршрутам.
